<?phpdefined('BASEPATH') OR exit('No direct script access allowed');class Customer extends CI_Controller {    function __construct() {        parent::__construct();		 $this->load->model('customer_model', 'customer');    }    public function index() {        $data['Module'] = "Customer";        $data['dataList'] = $this->customer->getData();//        echo "<pre>"; print_r($data);die;        $this->load->view('templates/header', $data);        $this->load->view('customer/view', $data);        $this->load->view('templates/footer', $data);    }    function edit($id = 0) {        $data = array();        if ($id)        {            $userData = $this->customer->getDataById($id);            if (!empty($userData))                $data = $userData;            else                redirect('customer');            $data['action'] = "edit";        } else{            $data['action'] = "add";        }        $data['Module'] = "Customer";        $data['countries'] = GetAllRecord('countries');        //$data['groupData'] = $this->aauth->list_groups(true, array('is_deleted' => 0));        if ($this->input->post())        {            $data = array(                'first_name'    => $this->input->post('first_name'),                'last_name'     => $this->input->post('last_name'),                'mobile_no'     => $this->input->post('mobile_no'),                'address'       => $this->input->post('address'),                'city'          => $this->input->post('city'),                'state'         => $this->input->post('state'),                'country'       => $this->input->post('country'),                'street'        => $this->input->post('street'),                'zip_code'      => $this->input->post('zip_code'),                'status'        => $this->input->post('status'),                'modified_date' => date('Y-m-d H:i:s')//                'email' => $this->input->post('email'),//                'password' => $this->input->post('user_password'),            );                       $userID = $this->input->post('uid');            if ($userID)            { /* Edit Data */                $optresult = $this->customer->update($userID, $data);                $action = "updated";            }//            else { /* Add Data *///				$data['created_date'] = date("Y-m-d H:i:s");//                $optresult = $this->aauth->create_user($data);//                $action = "added";//            }            if ($optresult)                $this->session->set_flashdata('addUpdMsg', "Customer has been " . $action . " successfully.");            else                $this->session->set_flashdata('addUpdMsg', "Customer is not " . $action . " successfully.");            redirect('customer');        }        $this->load->view('templates/header', $data);        $this->load->view('customer/addedit', $data);        $this->load->view('templates/footer', $data);    }    public function getStates()    {        $id = $this->input->post('country');        $data = $this->customer->getState($id);        $arr = array();        foreach ($data as $d) {            $arr[] = $d;        }        echo json_encode($arr);    }}?>