<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class Template extends CI_Controller {    function __construct() {         parent::__construct();    }    public function index() {        $data['Module'] = "Template";        $data['dataList'] = GetAllRecord('email_template');        $this->load->view('templates/header', $data);        $this->load->view('emailtemplate/view', $data);        $this->load->view('templates/footer', $data);    }    function addEdit($id = 0) {        $data = array();        if ($id) {            $emailtemplateData = GetAllRecord('email_template',array('emailtemplate_id'=>$id),true);            if (!empty($emailtemplateData))                $data = $emailtemplateData;            else                redirect('template');            $data['action'] = "edit";        } else            $data['action'] = "add";        $data['Module'] = "Template";        if ($this->input->post()) {            $data = array(                'emailtemplate_name' => $this->input->post('emailtemplate_name'),                'emailtemplate_subject' => $this->input->post('emailtemplate_subject'),                'emailtemplate_key' => $this->input->post('emailtemplate_key'),                'emailtemplate_desc' => $this->input->post('emailtemplate_desc'),                'allowedfields' => $this->input->post('allowedfields'),//                'emailtemplate_status' => $this->input->post('emailtemplate_status'),            );            $emailtemplateID = $this->input->post('emailtemplate_id');            if ($emailtemplateID) {                  $data['modified_date'] = date('Y-m-d H:i:s');                   $optresult = Insert_Update_Data('email_template',array('emailtemplate_id'=>$emailtemplateID),$data);                  $action = "updated";            }            else {                $data['created_date'] = date('Y-m-d H:i:s');                $optresult = Insert_Update_Data('email_template',array(),$data,true);                $action = "added";            }            if ($optresult)                $this->session->set_flashdata('addUpdMsg', "Email template is ".$action." successfully");            else                $this->session->set_flashdata('addUpdMsg', "Email template is not ".$action." successfully");            redirect('template');        }        $this->load->view('templates/header', $data);        $this->load->view('emailtemplate/addedit', $data);        $this->load->view('templates/footer', $data);    }}?>